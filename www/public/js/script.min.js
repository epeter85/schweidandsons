
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var smallScreen;var currurl;var windowWidth;var windowWidthEM;var windowheight;var contentHeight;var bodyHeight;var productPage;var isTouch=function(){return(('ontouchstart'in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0));};$(document).ready(function(){windowWidth=$(window).width();windowWidthEM=convertPxtoRem(windowWidth);windowheight=$(window).height();bodyHeight=$('body').height();contentHeight=$('.main-content')[0].scrollHeight;currurl=window.location.pathname;usersPattern=new RegExp('^/products/.*');productPage=usersPattern.test(currurl);if(windowWidthEM<42){smallScreen=true;}else{smallScreen=false;}
$('.main-content').css('opacity','0');$('.arrow-navigation').css('opacity','0');$('.home-logo').css('opacity','0');});var pageTransition=function(){$('.curtain').css('opacity','0');$('.home-logo').css('opacity','1');$('.left-small ').css('opacity','1');$('.main-content').css('opacity','1');$('.arrow-navigation').css('opacity','1');$('.main-logo').css('opacity','1');}
$(window).on('load resize',function(){if(isTouch()){$('#icon-instagram').removeClass('scaleHover');$('#icon-twitter').removeClass('scaleHover');$('#icon-facebook').removeClass('scaleHover');$('#email').removeClass('quickFade');$('#productItem').removeClass('itemRollOver');}
if(isTouch()){$('#video-container').css('display','none');}
loadBkgrndAsset();if(currurl=='/'){$('.home-logo').css('visibility','hidden');}else{$('.home-logo').css('visibility','visible');}
if(currurl!='/locations'){$('.main-content').css('overflow-y','scroll');}
if(currurl=='/locations'){document.getElementById('submit-button').addEventListener("click",sendZip);$('#loc-zip-field').bind("keyup keypress",function(e){var code=e.keyCode||e.which;if(code==13){sendZip();e.preventDefault();return false;}});}
if(productPage){$('.arrow-navigation').css('visibility','visible');};if(productPage){productsReOrientation();window.addEventListener('orientationchange',productsReOrientation);}
if(currurl=='/locations'){updateMapSize();window.addEventListener("orientationchange",updateMapSize);initialize();}
if(windowheight>bodyHeight){$('.inner-wrap').height(windowheight);}else{$('.contentHeight').height(bodyHeight);}
var arrowNavHeight=parseInt($('.arrow-back').css('height'),10);$(".arrow-navigation").css("padding-top",(windowheight/2)-arrowNavHeight);});var productsReOrientation=function(){if(window.orientation=='0'){$('body').css('background-position','center top');}else if(window.orientation=='90'||window.orientation=='-90'){$('body').css('background-position','center -180px');$('h1').css('padding-top','5em');}}
var fillBackground=function(){$('body').css('-webkit-background-size','cover');$('body').css('-moz-background-size','cover');$('body').css('-o-background-size','cover');$('body').css('background-size','cover');}
var tileBackground=function(){$('body').css('background-size','100%, 100%');}
var loadBkgrndAsset=function(){var newBkImage;var newTileImage;var videoAsset;var posterAsset;var prodBkgrndType;var amazonVideoURL='https://s3.amazonaws.com/schweidandsons.com/v2/videos/';var amazonPosterURL='https://s3.amazonaws.com/schweidandsons.com/v2/posters/';switch(currurl){case'/products/the-all-natural':newBkImage='mobile-angus-heritage-bg';newTileImage='mobile-angus-heritage-tile-bg';videoAsset='slate';posterAsset='poster-angus-heritage-bg';prodBkgrndType='tile';break;case'/products/grass-fed':newBkImage='mobile-grass-fed-bg';newTileImage='mobile-grass-fed-tile-bg';videoAsset='grass';posterAsset='poster-grass-fed-bg';prodBkgrndType='tile';break;case'/products/one-percenter':newBkImage='mobile-one-percenter-bg';newTileImage='mobile-one-percenter-tile-bg';videoAsset='pepper';posterAsset='poster-one-percenter-bg';prodBkgrndType='tile';break;case'/products/butchers':newBkImage='mobile-butchers-bg';newTileImage='mobile-butchers-tile-bg';videoAsset='block';posterAsset='poster-butchers-bg';prodBkgrndType='tile';break;case'/products/abc':newBkImage='mobile-abc-bg';newTileImage='mobile-abc-bg';videoAsset='buns';posterAsset='poster-abc-bg';prodBkgrndType='tile';break;case'/products/cab-custom-blend':newBkImage='mobile-custom-bg';newTileImage='mobile-custom-tile-bg';videoAsset='coals';posterAsset='poster-custom-bg';prodBkgrndType='tile';break;case'/products/prime-burger':newBkImage='mobile-prime-burger-bg';newTileImage='mobile-prime-burger-tile-bg';videoAsset='cloth';posterAsset='poster-prime-burger-bg';prodBkgrndType='tile';break;case'/products/signature-series':newBkImage='mobile-signature-series-bg';newTileImage='mobile-signature-series-tile-bg';videoAsset='paper';posterAsset='poster-signature-series-bg';prodBkgrndType='tile';break;case'/products/cab-all-american':newBkImage='mobile-steakhouse-bg';newTileImage='mobile-steakhouse-tile-bg';videoAsset='pan';posterAsset='poster-steakhouse-bg';prodBkgrndType='tile';break;default:newBkImage='mobile-home-bg';newTileImage='';videoAsset='http://schweidandsons.com.s3.amazonaws.com/video/v2/video';posterAsset='poster-home-bg';prodBkgrndType='fill';}
if(isTouch()&&smallScreen==true){if(prodBkgrndType=='tile'){tileBackground()};if(prodBkgrndType=='fill'){fillBackground()};var mobileBackgroundLoader=new PxLoader(),backgroundImg=mobileBackgroundLoader.addImage('../images/mobile/'+newBkImage+'.jpg'),tileImg=mobileBackgroundLoader.addImage('../images/mobile/'+newTileImage+'.jpg');mobileBackgroundLoader.addCompletionListener(function(){$('body').css('background-image','url('+backgroundImg.src+'), url('+tileImg.src+')');$('body').css('background-repeat','no-repeat, repeat-y');pageTransition();});mobileBackgroundLoader.start(backgroundImg,tileImg);}else{var video=document.getElementById('video-player');var newBackgroundImage=amazonPosterURL+posterAsset+'.jpg';var desktopBackgroundLoader=new PxLoader(),backgroundImg=desktopBackgroundLoader.addImage(newBackgroundImage);desktopBackgroundLoader.addCompletionListener(function(){$('body').css({"background":"#333 url('"+newBackgroundImage+"') no-repeat center center fixed"});$('body').css({"-webkit-background-size":"cover"});$('body').css({"-moz-background-size":"cover"});$('body').css({"-o-background-size":"cover"});$('body').css({"background-size":"cover"});pageTransition();});desktopBackgroundLoader.start();if(!isTouch()){var videoURL;if(productPage==true){videoURL=amazonVideoURL+videoAsset}else{videoURL=videoAsset}
if(video.canPlayType('video/mp4')){video.setAttribute("src",videoURL+'.mp4');}else if(video.canPlayType('video/webm')){video.setAttribute("src",videoURL+'.webm');}else if(video.canPlayType('video/ogg ')){video.setAttribute("src",videoURL+'.ogv');}}}}
function updateMapSize(){contentHeight=$('.main-content')[0].scrollHeight;windowWidth=$(window).width();var mapHeight;if(isTouch()&&smallScreen==true){if(window.orientation=='90'||window.orientation=='-90'){mapHeight=windowheight-convertRem(4);$('.loc-footer').css('display','none');}else if(window.orientation=='0'){mapHeight=windowheight-convertRem(10);$('#map-canvas').css('width',Math.round(windowWidth));$('.loc-footer').css('display','block');}}else{mapHeight=windowheight-convertRem(10);}
$('#map-canvas').css('height',Math.round(mapHeight));$('.desktop-results').css('height',Math.round(mapHeight-convertRem(3)));}
function getElementFontSize(context){return parseFloat(getComputedStyle(context||document.documentElement).fontSize);}
function convertRem(value){return convertEm(value);}
function convertEm(value,context){return value*getElementFontSize(context);}
function getRootElementFontSize(){return parseFloat(getComputedStyle(document.documentElement).fontSize);}
function convertPxtoRem(value){return value/getRootElementFontSize();}
function sendZip(e){var passedZip=document.getElementById('loc-zip-field').value;$('#loc-zip-field').blur();var lengthCheck=passedZip.toString();if((lengthCheck.length==5)){console.log('pass to google API');codeAddress(passedZip);}}
var map;var geocoder;var storeArray=[];var markersArray=[];var storesTextArray=[];var currentPhoneNumber;function initialize(){console.log('initialize');geocoder=new google.maps.Geocoder();var mapOptions={zoom:12};map=new google.maps.Map(document.getElementById('map-canvas'),mapOptions);google.maps.event.addListener(map,'tilesloaded',function(){console.log('GOOGLE MAP LOADED');$('#map-canvas').css('opacity','1');$('.loc-footer').css('opacity','1');});if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var pos=new google.maps.LatLng(position.coords.latitude,position.coords.longitude);map.setCenter(pos);getStoresFromJSON(position.coords.latitude,position.coords.longitude);},function(){handleNoGeolocation(true);});}else{handleNoGeolocation(false);}}
function handleNoGeolocation(errorFlag){if(errorFlag){var content='Error: The Geolocation service failed.';}else{var content='Error: Your browser doesn\'t support geolocation.';}
var options={map:map,position:new google.maps.LatLng(60,105),content:content};var infowindow=new google.maps.InfoWindow(options);map.setCenter(options.position);}
function codeAddress(zipCode){console.log('coding address');geocoder.geocode({'address':zipCode},function(results,status){if(status==google.maps.GeocoderStatus.OK){var lat=results[0].geometry.location.lat();var lon=results[0].geometry.location.lng();getStoresFromJSON(lat,lon);map.setCenter(results[0].geometry.location);var marker=new google.maps.Marker({map:map,position:results[0].geometry.location});map.setZoom(12);setMarkers();}else{alert("Geocode was not successful for the following reason: "+status);}});}
function getStoresFromJSON(lat,lon){storeArray=[];var storeLocations=$.ajax('/api/stores?lat='+lat+'&lon='+lon).done(function(data){for(var x=0;x<data.length;x++){storeArray.push(data[x]);if(data.length-1==x){setMarkers()};}}).fail(function(){console.log('API AJAX FAIL');}).always(function(){console.log('API AJAX COMPLETE');});}
function setMarkers(){console.log('ADDING MARKERS');deleteMarkers();var defaultIcon={url:'../images/map-icon-grey.png',size:new google.maps.Size(35,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,50)};var activeIcon={url:'../images/map-icon-red.png',size:new google.maps.Size(35,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,50)};var shape={coords:[1,1,35,1,30,45,5,45],type:'poly'};for(var i=0;i<storeArray.length;i++){var lat=storeArray[i].store.lat;var lng=storeArray[i].store.lon;var myLatLng=new google.maps.LatLng(lat,lng);var infowindow=new google.maps.InfoWindow({content:""});var marker=new google.maps.Marker({position:myLatLng,map:map,icon:defaultIcon,shape:shape,infoWindow:infowindow,title:storeArray[i].store.name,content:storeArray[i].store.address,center:myLatLng,index:i});google.maps.event.addListener(marker,'click',function(){for(var i=0;i<markersArray.length;i++){markersArray[i].infoWindow.close();}
for(var i=0;i<storesTextArray.length;i++){$(storesTextArray[i]).fadeTo(0,1.0);}
$(storesTextArray[this.index]).fadeTo(.5,.5);var contentString="<font color='black'><b>"+this.title+'</b><br>'+this.content+'</font>';this.infoWindow.setContent(contentString);this.infoWindow.open(map,this);map.panTo(this.position);for(var i=0;i<markersArray.length;i++){markersArray[i].setIcon(defaultIcon);markersArray[i].setZIndex(i);}
this.setIcon(activeIcon);this.setZIndex(markersArray.length+10);if($('#video-container').css('display')=='none'&&smallScreen==true){$('.mobile-search-result').html("");content=Math.round((storeArray[this.index].distance)*0.621371192*10)/10+' miles';content+='<br>';content+=storeArray[this.index].store.name;content+='<br>';content+=storeArray[this.index].store.address;$('.mobile-search-result').append(content);updatePhone(this.index);}
$('.mobile-phone').css('visiblity','visible');});markersArray.push(marker);}
if(isTouch()&&smallScreen==true){labelNearestStore();};$('.mobile-phone').click(function(){document.location='tel:'+currentPhoneNumber;});storesTextArray=[];$(".desktop-results").html("");for(var i=0;i<storeArray.length;i++){var clickObject=('store'+i).toString();content='<a class='+clickObject+' >'+storeArray[i].store.name;content+='<br>';content+=storeArray[i].store.address+'</a>';content+='<br>';content+="<hr class='hr'>";content+='<br>';var htmlNode=document.createElement('a');htmlNode.innerHTML=content
htmlNode.index=i;storesTextArray.push(htmlNode);$('.desktop-results').append(htmlNode);$(htmlNode).click(function(){for(var i=0;i<storesTextArray.length;i++){$(storesTextArray[i]).fadeTo(0,1.0);}
for(var i=0;i<markersArray.length;i++){markersArray[i].setIcon(defaultIcon);}
markersArray[this.index].setIcon(activeIcon);$(this).fadeTo(.5,0.5);});}}
function deleteMarkers(){for(var i=0;i<markersArray.length;i++){markersArray[i].setMap(null);}
markersArray=[];}
function storeButtonClick(){}
function labelNearestStore(){$('.mobile-search-result').html("");content=Math.round((storeArray[0].distance)*0.621371192*10)/10+' miles';content+='<br>';content+=storeArray[0].store.name;content+='<br>';content+=storeArray[0].store.address;$('.mobile-search-result').append(content);updatePhone(0);}
function updatePhone(index){currentPhoneNumber=storeArray[index].store.phone;console.log(currentPhoneNumber);}},{}]},{},[1])